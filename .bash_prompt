#!/bin/bash

underlineStart=$(tput smul);
underlineEnd=$(tput rmul);

BLACK="\e[30m"
GREEN="\e[32m"
BLUE="\e[34m"

DARKGRAY="\e[90m"
LIGHTGREEN="\e[92m"
LIGHTBLUE="\e[94m"
LIGHTCYAN="\e[96m"

GREEN_BKG="\e[42m"
BLUE_BKG="\e[44m"
LIGHTGRAY_BKG="\e[47m"
DARKGRAY_BKG="\e[100m"
LIGHTBLUE_BKG="\e[104m"

ENDCOLOR="\e[0m"

parse_git_branch() {
    git branch 2> /dev/null | sed -e '/^[^*]/d' -e 's/* \(.*\)/\1/' | tail -c 12
}

# HH:MM:SS WorkingDirectory [git_branch] $
export PS1="\[$DARKGRAY\]\D{%H:%M:%S} \[${GREEN}\]\W \[${LIGHTBLUE_BKG}\]\[${BLACK}\]\$(parse_git_branch)\[$ENDCOLOR\] $ "

# Set iTerm tab title to the working directory
export PROMPT_COMMAND='echo -ne "\033]0;${PWD##*/}\007"'